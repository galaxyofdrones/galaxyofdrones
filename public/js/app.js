(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(t,e,n){n("bUC5"),t.exports=n("pyCd")},1:function(t,e){},"9Wh1":function(t,e,n){"use strict";n.r(e);var i=n("Vjiq");window._=n("LvDl");try{window.Popper=n("8L3F").default,window.$=window.jQuery=n("EVdn"),n("SYky")}catch(t){}window.axios=n("vDqi"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var a=document.head.querySelector('meta[name="csrf-token"]');a?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=a.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token"),window.io=n("gFX4"),window.Echo=new i.a({broadcaster:"socket.io",host:{path:"/ws"}}),window.Vue=n("XuX8"),window.swal=n("PSD3"),n("wd/R").locale(document.querySelector("html").getAttribute("lang")),n("4R65"),n("pLo+"),n("t/UT"),window.axios.interceptors.response.use(null,function(t){var e=_.get(t.response,"status");return 401===e?window.location.reload():500===e&&swal({title:Translations.error.whoops,text:Translations.error.wrong,type:"error",showConfirmButton:!1,timer:1500}).catch(swal.noop),Promise.reject(t)})},bUC5:function(t,e,n){"use strict";n.r(e);var i=n("XuX8"),a=n.n(i),r=new a.a,o=a.a.extend({data:function(){return{remaining:0,remainingInterval:void 0}},created:function(){r.$on("modal-hidden",this.clearRemaining)},beforeDestroy:function(){r.$off("modal-hidden",this.clearRemaining)},methods:{initRemaining:function(t){var e=this;this.clearRemaining(),this.remaining=t,this.remaining<1||(this.remainingInterval=setInterval(function(){e.remaining--,e.remaining||e.clearRemaining()},1e3))},clearRemaining:function(){this.remainingInterval&&(this.remainingInterval=clearInterval(this.remainingInterval))}}}),s=o.extend({data:function(){return{$modal:void 0,isEnabled:!1}},mounted:function(){var t=this;this.$modal=$(this.$el).on("show.bs.modal",function(){r.$emit("modal-show"),t.isEnabled=!0}).on("hidden.bs.modal",function(){r.$emit("modal-hidden"),t.isEnabled=!1})},methods:{openAfterHidden:function(t){r.$on("modal-hidden",function e(){t(),r.$off("modal-hidden",e)}),this.close()},close:function(){this.$modal.modal("hide")}}}),c=s.extend({props:["url","destroyUrl"],data:function(){return{page:1,data:{current_page:1,from:0,last_page:1,to:0,total:0}}},created:function(){r.$on("bookmark-click",this.open)},computed:{isEmpty:function(){return 0===this.data.total},hasPrev:function(){return this.data.current_page>1},hasNext:function(){return this.data.current_page<this.data.last_page}},methods:{open:function(){this.page=1,this.fetchData(!0)},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url,{params:{page:this.page}}).then(function(n){t.data=n.data,e&&t.$nextTick(function(){return t.$modal.modal()})})},move:function(t){r.$emit("starmap-move",t.x,t.y),this.close()},destroy:function(t){var e=this;axios.delete(this.destroyUrl.replace("__bookmark__",t.id)).then(function(){e.page>1&&e.data.to-e.data.from==0?e.prevPage():e.fetchData()})},prevPage:function(){this.changePage(this.page-1)},nextPage:function(){this.changePage(this.page+1)},changePage:function(t){this.page!==t&&(t<1||t>this.data.last_page||(this.page=t,this.fetchData()))}}}),u=s.extend({props:["url","storeUrl","destroyUrl"],data:function(){return{isSubscribed:!1,canDemolish:!1,energy:0,selected:{id:void 0},grid:{id:void 0,building_id:void 0},data:{remaining:0,buildings:[]}}},created:function(){var t=this;r.$on("grid-click",this.open),r.$on("energy-updated",function(e){return t.energy=e}),r.$on("planet-update",function(){return t.fetchData()})},computed:{canConstruct:function(){return this.energy>=this.selected.construction_cost}},methods:{open:function(t){this.grid=t,this.fetchData(!0)},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(n){t.data=n.data,e||t.data.buildings.length?(t.initRemaining(t.data.remaining),_.find(t.data.buildings,t.selected)||t.select(_.first(t.data.buildings)),e&&t.$nextTick(function(){return t.$modal.modal()})):t.close()})},store:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id).replace("__building__",this.selected.id))},destroy:function(){axios.delete(this.destroyUrl.replace("__grid__",this.grid.id))},isSelected:function(t){return this.selected.id===t.id},select:function(t){this.selected=t}}}),d=s.extend({props:["url"],data:function(){return{grid:{}}},created:function(){r.$on("demolish-open",this.open)},methods:{open:function(t){this.grid=t,this.$modal.modal()},demolish:function(){axios.delete(this.url.replace("__grid__",this.grid.id)).then(this.close)}}}),h=n("wd/R"),l=n.n(h),p=function(t){return"(".concat(t,")")},f=function(t){var e=l()(t,"YYYY-MM-DD HH:mm:ss");return e.isValid()?e.fromNow():t},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resource";return"".concat(e,"-").concat(t&&t.hasOwnProperty("id")?t.id:t)},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.abs(t);return n>=Math.pow(10,13)?"".concat((t/Math.pow(10,12)).toFixed(e),"t"):n>=Math.pow(10,10)?"".concat((t/Math.pow(10,9)).toFixed(e),"b"):n>=Math.pow(10,7)?"".concat((t/Math.pow(10,6)).toFixed(e),"m"):n>=Math.pow(10,4)?"".concat((t/Math.pow(10,3)).toFixed(e),"k"):Math.round(t)},y=function(t){return"".concat((100*t).toFixed(0),"%")},v=function(t,e){return e||(e=t),t=isNaN(t)?t:Math.abs(t),e<0?"-".concat(t):"+".concat(t)},x=function(t){var e=Math.abs(t),n=_.padStart(Math.floor(e/3600),2,"0"),i=_.padStart(Math.floor(e/60%60),2,"0"),a=_.padStart(Math.floor(e%60),2,"0");return"".concat(n,":").concat(i,":").concat(a)},b=a.a.extend({props:["isEnabled","url"],data:function(){return{page:1,data:{current_page:1,last_page:1,total:0}}},created:function(){var t=this;r.$on("user-updated",function(){return t.fetchData()})},computed:{isEmpty:function(){return 0===this.data.total},hasPrev:function(){return this.data.current_page>1},hasNext:function(){return this.data.current_page<this.data.last_page},dataUrl:function(){return this.url}},watch:{isEnabled:function(){this.page=1,this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.dataUrl,{params:{page:this.page}}).then(function(e){return t.data=e.data})},prevPage:function(){this.changePage(this.page-1)},nextPage:function(){this.changePage(this.page+1)},changePage:function(t){this.page!==t&&(t<1||t>this.data.last_page||(this.page=t,this.fetchData()))}}}),w=b.extend({props:["openAfterHidden"],data:function(){return{collapsed:[]}},methods:{isCollapsed:function(t){return _.includes(this.collapsed,t.id)},collapse:function(t){var e=_.indexOf(this.collapsed,t.id);e>-1?this.collapsed.splice(e,1):this.collapsed.push(t.id)},openUser:function(t){this.openAfterHidden(function(){return r.$emit("profile-click",t)})}}}),k=b.extend({props:["openAfterHidden"],data:function(){return{collapsed:[]}},methods:{isCollapsed:function(t){return _.includes(this.collapsed,t.id)},collapse:function(t){var e=_.indexOf(this.collapsed,t.id);e>-1?this.collapsed.splice(e,1):this.collapsed.push(t.id)},openUser:function(t){this.openAfterHidden(function(){return r.$emit("profile-click",t)})},sendMessage:function(t){this.openAfterHidden(function(){return r.$emit("message-click",t)})}}}),U={data:function(){return{selectedTab:""}},methods:{isSelectedTab:function(t){return this.selectedTab===t},selectTab:function(t){this.selectedTab=t}}},T=s.extend({components:{BattleLog:w,CompletionLog:b,MessageLog:k},mixins:[U],data:function(){return{selectedTab:"mission-log"}},created:function(){r.$on("mailbox-click",this.open)},methods:{open:function(){var t=this;this.$nextTick(function(){return t.$modal.modal()})}}}),R=s.extend({props:["url"],data:function(){return{errors:{},form:{}}},created:function(){this.form=this.values()},computed:{method:function(){return"post"},parameters:function(){return JSON.parse(JSON.stringify(this.form))}},methods:{hasError:function(t){return this.errors.hasOwnProperty(t)},values:function(){return{}},error:function(t){return _.first(this.errors[t])},submit:function(){var t=this;axios[this.method](this.url,this.parameters).then(function(){t.form=t.values(),t.errors={},t.close()}).catch(function(e){return t.errors=e.response.data.errors})}}}),D=R.extend({created:function(){r.$on("message-click",this.open)},methods:{open:function(t){var e=this;this.form.recipient=t,this.$nextTick(function(){return e.$modal.modal()})},values:function(){return{recipient:"",message:""}}}}),S={props:["url"],data:function(){return{data:{incoming:0}}},created:function(){var t=this;r.$on("user-updated",function(){return t.fetchData()})},computed:{isEnabled:function(){return this.data.incoming>0}},methods:{fetchData:function(){var t=this;axios.get(this.url).then(function(e){return t.data=e.data})},openRadar:function(){r.$emit("mothership-click","radar")}}},E=o.extend({props:["completion","isCompletable","store"],created:function(){this.initRemaining(this.completion.remaining)},watch:{completion:function(){this.initRemaining(this.completion.remaining)}}}),M={props:["isEnabled","url","storeUrl"],components:{Completion:E},data:function(){return{data:{units:[],expeditions:[]}}},created:function(){var t=this;r.$on("planet-update",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.expeditions.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){return t.data=e.data})},isCompletable:function(t){var e=this;return!_.some(t.units,function(t){return t.quantity>_.find(e.data.units,{id:t.id}).quantity})},store:function(t){axios.post(this.storeUrl.replace("__expedition__",t.id))}}},P={props:["isEnabled","url","storeUrl"],components:{Completion:E},data:function(){return{data:{solarion:0,resources:[],missions:[]}}},created:function(){var t=this;r.$on("planet-update",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.missions.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){return t.data=e.data})},isCompletable:function(t){var e=this;return!_.some(t.resources,function(t){return t.quantity>_.find(e.data.resources,{id:t.id}).quantity})},store:function(t){axios.post(this.storeUrl.replace("__mission__",t.id))}}},q={props:["isEnabled","url","storeResourceUrl","storeUnitUrl","destroyResourceUrl","destroyUnitUrl"],components:{Research:o.extend({props:["research","isResearchable","store","destroy"],data:function(){return{isResearch:!0}},created:function(){this.initRemaining(this.research.remaining)},computed:{resource:function(){return this.research},unit:function(){return this.research}},watch:{research:function(){this.initRemaining(this.research.remaining)}}})},data:function(){return{energy:0,data:{resource:void 0,units:[]}}},created:function(){var t=this;r.$on("energy-updated",function(e){return t.energy=e}),r.$on("user-updated",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.resource&&!this.data.units.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){return t.data=e.data})},isResearchable:function(t){return this.energy>=t.research_cost},storeResource:function(){axios.post(this.storeResourceUrl)},destroyResource:function(){axios.delete(this.destroyResourceUrl)},storeUnit:function(t){axios.post(this.storeUnitUrl.replace("__unit__",t.id))},destroyUnit:function(t){axios.delete(this.destroyUnitUrl.replace("__unit__",t.id))}}},C=o.extend({props:["movement","canMove","move"],created:function(){this.initRemaining(this.movement.remaining)},watch:{movement:function(){this.initRemaining(this.movement.remaining)}}}),I={props:["isEnabled","url","canMove","close"],components:{Movement:C},data:function(){return{data:{incoming_movements:[]}}},created:function(){var t=this;r.$on("user-update",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.incoming_movements.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){return t.data=e.data})},move:function(t){r.$emit("starmap-move",t.end.x,t.end.y),this.close()}}},A={props:["isEnabled","url","storeUrl","close","planets"],components:{Completion:E},data:function(){return{selected:void 0,data:{can_store:!0,shields:[]}}},computed:{isEmpty:function(){return!this.data.shields.length}},watch:{isEnabled:function(){this.fetchData()},planets:function(){_.find(this.planets,{id:this.selected})||(this.selected=_.get(_.first(this.planets),"id"))}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){return t.data=e.data})},store:function(){axios.post(this.storeUrl.replace("__planet__",this.selected)).then(this.fetchData)},move:function(t){r.$emit("starmap-move",t.planet.x,t.planet.y),this.close()}}},N=s.extend({props:["url","storeUrl"],components:{Armory:M,Cargo:P,Laboratory:q,Radar:I,Shield:A},mixins:[U],data:function(){return{selected:void 0,selectedTab:"cargo",data:{capital_id:void 0,capital_change_remaining:0,incoming_capital_movement_count:0,planets:[]}}},created:function(){var t=this;r.$on("mothership-click",this.open),r.$on("user-updated",function(){return t.fetchData()})},computed:{canHyperjump:function(){return!this.data.incoming_capital_movement_count&&this.selected!==this.data.capital_id}},methods:{open:function(t){t&&this.selectTab(t),this.fetchData(!0)},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url).then(function(n){t.data=n.data,t.selected=t.data.capital_id,t.initRemaining(t.data.capital_change_remaining),e&&t.$nextTick(function(){return t.$modal.modal()})})},store:function(){axios.put(this.storeUrl.replace("__planet__",this.selected))}}}),z={data:function(){return{isMove:!1,quantity:{}}},computed:{hasUnits:function(){var t=this,e=_.pickBy(this.quantity),n=!1;return _.forEach(this.planet.units,function(i){if(e.hasOwnProperty(i.id))return n=e[i.id]>0&&e[i.id]<=t.unitQuantity(i)}),n},slowestSupportUnitSpeed:function(){if(this.hasUnits){var t=_.pickBy(this.quantity);return _.get(_.minBy(_.filter(this.planet.units,function(e){return t.hasOwnProperty(e.id)}),"speed"),"speed",1)}return 1}},methods:{setTotalUnit:function(t){var e=this.unitQuantity(t);e>0&&this.$set(this.quantity,t.id,e)},unitQuantity:function(t){return(this.isMove?_.get(t,"storage",0):0)+_.get(t,"quantity",0)}}},O={data:function(){return{isMove:!1,quantity:{}}},computed:{canTransport:function(){return this.hasResources&&this.transporterQuantity<=this.unitQuantity(this.transporterUnit)},hasResources:function(){var t=this,e=_.pickBy(this.quantity),n=!1;return _.forEach(this.planet.resources,function(i){if(e.hasOwnProperty(i.id))return n=e[i.id]>0&&e[i.id]<=t.resourceQuantity(i)}),n},transporterUnit:function(){var t=this;return _.find(this.planet.units,function(e){return e.type===t.unitTypes.transporter})},transporterQuantity:function(){if(!this.hasResources)return 0;var t=_.reduce(_.pickBy(this.quantity),function(t,e){return t+e},0);return Math.ceil(t/this.transporterUnit.capacity)}},methods:{setTotalResource:function(t){var e=this.resourceQuantity(t);e>0&&this.$set(this.quantity,t.id,e)},resourceQuantity:function(t){var e=this.isMove?_.get(t,"storage",0):0;return this.planet.resource_id===t.id?e+Math.floor(this.mined):e+_.get(t,"quantity",0)}}},J=s.extend({props:["types","unitTypes","urls"],mixins:[z,O],data:function(){return{isMove:!0,type:void 0,mined:0,selected:{id:void 0,travel_time:0},planet:{id:void 0,resource_id:void 0,resources:[],units:[]}}},created:function(){var t=this;r.$on("move-click",this.open),r.$on("planet-updated",function(e){return t.planet=e}),r.$on("resource-updated",function(e){return t.mined=e})},computed:{isScoutType:function(){return this.type===this.types.scout},isAttackType:function(){return this.type===this.types.attack},isOccupyType:function(){return this.type===this.types.occupy},isSupportType:function(){return this.type===this.types.support},isTransportType:function(){return this.type===this.types.transport},canScout:function(){return this.quantity.hasOwnProperty(this.scoutUnit.id)&&this.quantity[this.scoutUnit.id]>0&&this.quantity[this.scoutUnit.id]<=this.unitQuantity(this.scoutUnit)},canOccupy:function(){return this.unitQuantity(this.settlerUnit)>0},hasFighterUnits:function(){var t=this,e=_.pickBy(this.quantity),n=!1;return _.forEach(this.fighterUnits,function(i){if(e.hasOwnProperty(i.id))return n=e[i.id]>0&&e[i.id]<=t.unitQuantity(i)}),n},scoutUnit:function(){var t=this;return _.find(this.planet.units,function(e){return e.type===t.unitTypes.scout})},settlerUnit:function(){var t=this;return _.find(this.planet.units,function(e){return e.type===t.unitTypes.settler})},fighterUnits:function(){var t=this;return _.filter(this.planet.units,function(e){return e.type===t.unitTypes.fighter||e.type===t.unitTypes.heavyFighter})},travelTime:function(){return Math.round(this.selected.travel_time/this.slowestUnitSpeed)},slowestUnitSpeed:function(){if(this.isScoutType)return this.scoutUnit.speed;if(this.isOccupyType)return this.settlerUnit.speed;if(this.isTransportType)return this.transporterUnit.speed;if(this.isSupportType)return this.slowestSupportUnitSpeed;if(this.isAttackType&&this.hasFighterUnits){var t=_.pickBy(this.quantity);return _.get(_.minBy(_.filter(this.fighterUnits,function(e){return t.hasOwnProperty(e.id)}),"speed"),"speed",1)}return 1}},methods:{open:function(t,e){var n=this;this.type=t,this.selected=e,this.quantity={},this.$nextTick(function(){return n.$modal.modal()})},scout:function(){axios.post(this.urls.scout.replace("__planet__",this.selected.id),{quantity:this.quantity[this.scoutUnit.id]}).then(this.close)},attack:function(){axios.post(this.urls.attack.replace("__planet__",this.selected.id),{quantity:this.quantity}).then(this.close)},occupy:function(){axios.post(this.urls.occupy.replace("__planet__",this.selected.id)).then(this.close)},support:function(){axios.post(this.urls.support.replace("__planet__",this.selected.id),{quantity:this.quantity}).then(this.close)},transport:function(){axios.post(this.urls.transport.replace("__planet__",this.selected.id),{quantity:this.quantity}).then(this.close)}}}),B={methods:{prev:function(){r.$emit("prev-planet")},next:function(){r.$emit("next-planet")},upgradeAll:function(){r.$emit("upgrade-all-open")}}},j=s.extend({props:["url"],data:function(){return{geoJsonPoint:{properties:{status:""},geometry:{coordinates:[]}},planet:{id:void 0},data:{username:""}}},created:function(){var t=this;r.$on("planet-click",this.open),r.$on("planet-updated",function(e){return t.planet=e})},computed:{isCurrent:function(){return this.properties.id===this.planet.id},isFriendly:function(){return"friendly"===this.properties.status},properties:function(){return this.geoJsonPoint.properties},geometry:function(){return this.geoJsonPoint.geometry}},methods:{open:function(t){this.geoJsonPoint=t,this.fetchData()},fetchData:function(){var t=this;axios.get(this.url.replace("__planet__",this.properties.id)).then(function(e){t.data=e.data,t.$nextTick(function(){return t.$modal.modal()})})},openUser:function(){var t=this;this.openAfterHidden(function(){return r.$emit("profile-click",t.data.username)})},changePlanet:function(){r.$emit("change-planet",this.properties.id)},openMove:function(t){var e=this;this.openAfterHidden(function(){return r.$emit("move-click",t,_.assignIn({},e.properties,e.data))})}}}),H={props:["url"],data:function(){return{isSubscribed:!1,energy:0,energyInterval:void 0,data:{id:void 0,username:"",production_rate:0,experience:0,level:1,level_experience:0,next_level_experience:0,notification_count:0}}},created:function(){this.fetchData()},computed:{hasUnread:function(){return this.data.notification_count>0},experienceLabel:function(){return"".concat(this.data.experience," / ").concat(this.data.next_level_experience)},experienceProgress:function(){return"".concat((this.data.experience-this.data.level_experience)/(this.data.next_level_experience-this.data.level_experience)*100,"%")},energyValue:function(){return Math.round(this.energy)}},watch:{energy:function(){r.$emit("energy-updated",this.energy)}},methods:{fetchData:function(){var t=this;r.$emit("user-update"),this.unsubscribe(),axios.get(this.url).then(function(e){t.data=e.data,t.initEnergy(),t.subscribe(),r.$emit("user-updated",t.data)})},initEnergy:function(){var t=this;this.clearEnergy(),this.energy=this.data.energy,this.data.production_rate&&(this.energyInterval=setInterval(function(){return t.energy+=t.data.production_rate/3600},1e3))},clearEnergy:function(){this.energyInterval&&(this.energyInterval=clearInterval(this.energyInterval))},subscribe:function(){this.isSubscribed||(Echo.private("user.".concat(this.data.id)).listen(".updated",this.fetchData).notification(this.fetchData),this.isSubscribed=!0)},unsubscribe:function(){this.isSubscribed&&(Echo.leave("user.".concat(this.data.id)),this.isSubscribed=!1)},openUser:function(){r.$emit("profile-click",this.data.username)},openMailbox:function(){r.$emit("mailbox-click")},openSetting:function(){r.$emit("setting-click")}}},Q={bind:function(t,e){var n={container:"body"};e.value&&(n=_.extend({},n,e.value)),$(t).popover(n)},unbind:function(t){$(t).popover("dispose")},update:function(t,e){e.value.title!==e.oldValue.title&&($(t).data("bs.popover").config.title=e.value.title),e.value.content!==e.oldValue.content&&($(t).data("bs.popover").config.content=e.value.content)}},V=b.extend({props:["username","canMove","close"],computed:{dataUrl:function(){return this.url.replace("__user__",this.username)}},methods:{move:function(t){r.$emit("starmap-move",t.x,t.y),this.close()}}}),X=s.extend({props:["url","blockUrl","canMove","translations"],components:{PlanetList:V},data:function(){return{isBlocked:!1,username:"",data:{created_at:""}}},created:function(){r.$on("profile-click",this.open)},computed:{joined:function(){return this.translations.joined.replace("__datetime__",f(this.data.created_at))}},methods:{open:function(t){this.username=t,this.fetchData()},fetchData:function(){var t=this;axios.get(this.url.replace("__user__",this.username)).then(function(e){t.data=e.data,t.isBlocked=t.data.isBlocked,t.$nextTick(function(){return t.$modal.modal()})})},sendMessage:function(){var t=this;this.openAfterHidden(function(){return r.$emit("message-click",t.username)})},toggleBlock:function(){this.isBlocked=!this.isBlocked,axios.put(this.blockUrl.replace("__user__",this.username))}}}),F=R.extend({data:function(){return{email:""}},created:function(){var t=this;r.$on("setting-click",this.open),r.$on("user-updated",function(e){return t.email=e.email})},computed:{method:function(){return"put"}},methods:{open:function(){var t=this;this.form.email=this.email,this.$nextTick(function(){return t.$modal.modal()})},values:function(){return{email:"",password:"",password_confirmation:""}}}}),Y=n("t/UT"),Z={props:["planetUrl","planetNameUrl","userCurrentUrl"],data:function(){return{perfectScrollbar:void 0,isActive:!1,isEditActive:!1,isSubscribed:!1,selected:void 0,name:"",usedCapacity:0,resource:0,resourceInterval:void 0,data:{id:void 0,resource_id:void 0,user_id:void 0,capacity:0,supply:0,solarion:0,mining_rate:0,used_capacity:0,used_supply:0,used_training_supply:0,display_name:"",planets:[],resources:[],units:[]}}},created:function(){var t=this;this.fetchData(),r.$on("prev-planet",this.prevPlanet),r.$on("next-planet",this.nextPlanet),r.$on("change-planet",function(e){return t.selected=e})},mounted:function(){this.initPerfectScrollbar()},watch:{selected:function(){this.changePlanet()},resource:function(){r.$emit("resource-updated",this.resource)}},computed:{isResourceFull:function(){return this.data.capacity===this.usedCapacity},isUnitFull:function(){return this.data.supply===this.data.used_supply},selectedIndex:function(){return _.findIndex(this.data.planets,{id:this.selected})},resourceLabel:function(){return"".concat(Math.round(this.usedCapacity)," / ").concat(this.data.capacity)},resourceProgress:function(){return"".concat(Math.min(100,this.usedCapacity/this.data.capacity*100),"%")},unitLabel:function(){return"".concat(this.data.used_supply+this.data.used_training_supply," / ").concat(this.data.supply)},unitProgress:function(){return"".concat(this.data.used_supply/this.data.supply*100,"%")},unitTrainingProgress:function(){return"".concat(this.data.used_training_supply/this.data.supply*100,"%")}},methods:{fetchData:function(){var t=this;r.$emit("planet-update"),this.unsubscribe(),axios.get(this.planetUrl).then(function(e){t.data=e.data,t.selected=t.data.id,t.initName(),t.initResource(),t.subscribe(),r.$emit("planet-updated",t.data)})},renamePlanet:function(){this.name===this.data.display_name?this.isEditActive=!1:this.name||this.data.name!==this.data.display_name?axios.put(this.planetNameUrl,{name:this.name}):this.initName()},prevPlanet:function(){var t=this.selectedIndex;--t<0&&(t=this.data.planets.length-1),this.changePlanetByIndex(t)},nextPlanet:function(){var t=this.selectedIndex;++t===this.data.planets.length&&(t=0),this.changePlanetByIndex(t)},changePlanet:function(){this.selected!==this.data.id&&axios.put(this.userCurrentUrl.replace("__planet__",this.selected))},changePlanetByIndex:function(t){_.isUndefined(this.data.planets[t])||(this.selected=_.get(this.data.planets[t],"id"))},initName:function(){this.isEditActive=!1,this.name=this.data.display_name},initResource:function(){var t=this;this.clearResource(),this.usedCapacity=this.data.used_capacity,this.resource=_.get(_.find(this.data.resources,{id:this.data.resource_id}),"quantity",0),this.data.mining_rate&&this.data.capacity!==this.usedCapacity&&(this.resourceInterval=setInterval(function(){var e=Math.min(t.data.capacity-t.usedCapacity,t.data.mining_rate/3600);t.resource+=e,t.usedCapacity+=e,t.data.capacity===t.usedCapacity&&t.clearResource()},1e3))},clearResource:function(){this.resourceInterval&&(this.resourceInterval=clearInterval(this.resourceInterval))},initPerfectScrollbar:function(){this.perfectScrollbar=new Y.default(this.$refs.scrollbar)},updatePerfectScrollbar:function(){this.perfectScrollbar.update()},subscribe:function(){this.isSubscribed||(Echo.private("planet.".concat(this.data.id)).listen(".updated",this.fetchData),r.$on("user-update",this.fetchData),this.isSubscribed=!0)},unsubscribe:function(){this.isSubscribed&&(Echo.leave("planet.".concat(this.data.id)),r.$off("user-update",this.fetchData),this.isSubscribed=!1)},toggle:function(){this.isActive=!this.isActive,this.isActive&&this.updatePerfectScrollbar()},toggleEdit:function(){var t=this;this.isEditActive=!this.isEditActive,this.isEditActive&&this.$nextTick(function(){return t.$refs.name.focus()})},resourceQuantity:function(t){return t.id===this.data.resource_id?this.resource:t.quantity},resourceValue:function(t){return Math.round(this.resourceQuantity(t))},openMothership:function(){r.$emit("mothership-click")},openTrophy:function(){r.$emit("trophy-click")}}},W=s.extend({props:["url","bookmarkStoreUrl"],data:function(){return{geoJsonPoint:{properties:{},geometry:{coordinates:[]}},data:{isBookmarked:!1,hasExpedition:!1}}},created:function(){r.$on("star-click",this.open)},computed:{properties:function(){return this.geoJsonPoint.properties},geometry:function(){return this.geoJsonPoint.geometry}},methods:{open:function(t){this.geoJsonPoint=t,this.fetchData()},fetchData:function(){var t=this;axios.get(this.url.replace("__star__",this.properties.id)).then(function(e){t.data=e.data,t.$nextTick(function(){return t.$modal.modal()})})},bookmark:function(){this.data.isBookmarked=!0,axios.post(this.bookmarkStoreUrl.replace("__star__",this.properties.id))},showExpedition:function(){this.openAfterHidden(function(){return r.$emit("mothership-click","armory")})}}}),K={props:["size","maxZoom","geoJsonUrl","tileUrl","imagePath","zoomInTitle","zoomOutTitle","bookmarkTitle"],data:function(){return{geoJsonLayer:void 0,map:void 0,zoom:0,planet:{id:void 0,x:0,y:0}}},created:function(){this.zoom=Math.ceil(Math.log(this.size/256)/Math.log(2))},mounted:function(){var t=this;r.$on("planet-updated",function(e){var n=e.id===t.planet.id;t.planet=e,t.map?n?t.geoJsonLayer.refresh():t.map.setView(t.center(),t.maxZoom):t.initLeaflet()}),r.$on("starmap-move",function(e,n){return t.map.setView(t.unproject(e,n),t.maxZoom)})},methods:{initLeaflet:function(){var t=this;L.Icon.Default.imagePath="".concat(this.imagePath,"/"),this.map=L.map(this.$el,{attributionControl:!1,boxZoom:!1,crs:L.CRS.Simple,minZoom:0,maxZoom:this.maxZoom,zoomControl:!1}),this.map.setView(this.center(),this.maxZoom),L.tileLayer(this.tileUrl,{noWrap:!0,bounds:L.latLngBounds(this.southWest(),this.northEast())}).addTo(this.map);var e=function(e){return t.map.unproject([e[0],e[1]],t.maxZoom)};this.geoJsonLayer=L.geoJson.ajax(this.geoJson(),{coordsToLatLng:e,pointToLayer:function(n,i){return n.properties.isMovement?t.movementMarker(i,e(n.properties.end),n):t.objectMarker(i,n)},style:function(e){if("LineString"===e.geometry.type)return{className:"leaflet-movement ".concat(t.movementClassName(e))}}}),this.geoJsonLayer.ajaxParams.headers=axios.defaults.headers.common,this.geoJsonLayer.addTo(this.map),this.map.on("zoomstart",function(){return t.geoJsonLayer.clearLayers()}),this.map.on("moveend",function(){return t.geoJsonLayer.refresh(t.geoJson())}),this.zoomControl().addTo(this.map),this.bookmarkControl().addTo(this.map)},geoJson:function(){var t=this.map.getPixelBounds(),e=this.multiplier();return this.geoJsonUrl.replace("__zoom__",this.map.getZoom()).replace("__bounds__",[t.min.x*e,t.min.y*e,t.max.x*e,t.max.y*e].join(","))},center:function(){return this.unproject(this.planet.x,this.planet.y)},southWest:function(){return this.unproject(0,0)},northEast:function(){return this.unproject(this.size,this.size)},unproject:function(t,e){return this.map.unproject([t,e],this.zoom)},multiplier:function(){return Math.pow(2,this.maxZoom-this.map.getZoom())},zoomControl:function(){return L.control.zoom({zoomInTitle:this.zoomInTitle,zoomOutTitle:this.zoomOutTitle})},bookmarkControl:function(){return new(L.Control.extend({options:{position:"topleft",bookmarkTitle:this.bookmarkTitle,bookmarkIconClass:"fas fa-star"},onAdd:function(){var t=L.DomUtil.create("div","leaflet-bar leaflet-control leaflet-control-bookmark"),e=L.DomUtil.create("a","leaflet-control-bookmark",t);return e.href="#",e.title=this.options.bookmarkTitle,e.onclick=function(t){t.preventDefault(),r.$emit("bookmark-click")},L.DomUtil.create("i",this.options.bookmarkIconClass,e),t}}))},objectMarker:function(t,e){var n=(e.properties.size+16)/this.multiplier(),i={className:"planet"===e.properties.type?"leaflet-icon-object ".concat(e.properties.status):"leaflet-icon-object",iconSize:[n,n]};this.map.getZoom()>=8&&(i.html="<span>".concat(e.properties.name,"</span>"));var a=L.marker(t,{title:e.properties.name,icon:L.divIcon(i)});return a.on("click",function(){return r.$emit("".concat(e.properties.type,"-click"),e)}),a},movementMarker:function(t,e,n){L.MovementMarker=L.Marker.extend({options:{end:e,interval:n.properties.interval},onAdd:function(t){var e=this;L.Marker.prototype.onAdd.call(this,t),this._icon&&(this._icon.style[L.DomUtil.TRANSITION]="all ".concat(this.options.interval-1,"s linear")),this._shadow&&(this._shadow.style[L.DomUtil.TRANSITION]="all ".concat(this.options.interval-1,"s linear")),setTimeout(function(){return e.setLatLng(e.options.end)},1e3)}});var i=32/this.multiplier(),a={className:"leaflet-icon-movement ".concat(this.movementClassName(n)," size-").concat(i),iconSize:[i,i]};if(this.map.getZoom()>=8){var r=Math.atan2(e.lng-t.lng,e.lat-t.lat),o=360*(r>0?r:2*Math.PI+r)/(2*Math.PI)-45;a.html='<i class="fas fa-rocket" style="'.concat(L.DomUtil.TRANSFORM,": translateX(-50%) translateY(-50%) rotate(").concat(o,'deg)"></i>')}return new L.MovementMarker(t,{icon:L.divIcon(a)})},movementClassName:function(t){return"expedition"===t.properties.type?t.properties.type:t.properties.type<3?"".concat(t.properties.status,"-attack"):t.properties.status}}},G=n("kSzJ"),tt={hitArea:new G.Polygon([0,120,160,40,320,120,160,200]),plain:new G.Rectangle(0,0,320,200),resources:{1:new G.Rectangle(320,0,320,200),2:new G.Rectangle(640,0,320,200),3:new G.Rectangle(960,0,320,200),4:new G.Rectangle(1280,0,320,200),5:new G.Rectangle(1600,0,320,200),6:new G.Rectangle(0,200,320,200),7:new G.Rectangle(320,200,320,200)},buildings:{1:new G.Rectangle(640,200,320,200),2:{1:new G.Rectangle(960,200,320,200),2:new G.Rectangle(1280,200,320,200),3:new G.Rectangle(1600,200,320,200),4:new G.Rectangle(0,400,320,200),5:new G.Rectangle(320,400,320,200),6:new G.Rectangle(640,400,320,200),7:new G.Rectangle(960,400,320,200)},3:new G.Rectangle(1280,400,320,200),4:new G.Rectangle(1600,400,320,200),5:new G.Rectangle(0,600,320,200),6:new G.Rectangle(320,600,320,200),7:new G.Rectangle(640,600,320,200),8:new G.Rectangle(960,600,320,200),9:new G.Rectangle(1280,600,320,200),10:new G.Rectangle(1600,600,320,200)},constructions:{1:new G.Rectangle(0,800,320,200),2:new G.Rectangle(320,800,320,200),3:new G.Rectangle(640,800,320,200),4:new G.Rectangle(960,800,320,200),5:new G.Rectangle(1280,800,320,200),6:new G.Rectangle(1600,800,320,200),7:new G.Rectangle(0,1e3,320,200),8:new G.Rectangle(320,1e3,320,200),9:new G.Rectangle(640,1e3,320,200),10:new G.Rectangle(960,1e3,320,200)}},et={props:["width","height","backgroundTexture","gridTextureAtlas"],data:function(){return{$parent:void 0,clickTreshold:5,isDragging:!1,dragStartX:0,dragStartY:0,dragged:0,container:void 0,intervals:[],loader:void 0,renderer:void 0,stage:void 0,planet:{resource_id:void 0,grids:[]},textStyle:{fontFamily:"Exo 2",fontSize:"14px",fill:"#fff",align:"center",stroke:"#0e141c",strokeThickness:4}}},created:function(){G.utils.skipHello()},mounted:function(){var t=this;this.$parent=$(this.$el).parent(),r.$on("planet-updated",function(e){t.planet=e,t.stage?t.updatePixi():t.initPixi()})},methods:{initPixi:function(){var t=this;this.loader=new G.loaders.Loader,this.loader.add(this.backgroundName(),this.background()),this.loader.add("grid",this.gridTextureAtlas),this.loader.load(function(){t.setup(),t.align(),t.animate()}),this.stage=new G.Container,this.container=new G.Container,this.container.interactive=!0,this.container.on("mousedown",this.mouseDown),this.container.on("mousemove",this.mouseMove),this.container.on("mouseup",this.mouseUp),this.container.on("mouseupoutside",this.mouseUp),this.container.on("touchstart",this.mouseDown),this.container.on("touchmove",this.mouseMove),this.container.on("touchend",this.mouseUp),this.container.on("touchendoutside",this.mouseUp),this.stage.addChild(this.container),this.renderer=Object(G.autoDetectRenderer)(this.rendererWidth(),this.rendererHeight(),{view:this.$el,transparent:!0}),window.addEventListener("resize",this.resize)},updatePixi:function(){var t=this.backgroundName();this.loader.resources[t]?this.setup():(this.loader.add(t,this.background()),this.loader.load(this.setup))},setup:function(){var t=this;_.forEach(this.intervals,function(t){return clearInterval(t)}),this.intervals=[],this.container.removeChildren(),this.container.addChild(this.backgroundSprite()),_.forEach(this.planet.grids,function(e){return t.container.addChild(t.gridSprite(e))})},resize:function(){this.renderer.resize(this.rendererWidth(),this.rendererHeight()),this.align()},align:function(){this.container.position.x=this.centerX(),this.container.position.y=this.centerY()},animate:function(){requestAnimationFrame(this.animate);var t=this.containerX(),e=this.containerY();this.container.position.x<t&&(this.container.position.x=t),this.container.position.y<e&&(this.container.position.y=e),this.container.position.x>0&&(this.container.position.x=0),this.container.position.y>0&&(this.container.position.y=0),this.renderer.render(this.stage)},mouseDown:function(t){var e=t.data.getLocalPosition(this.container.parent);this.dragStartX=e.x-this.container.position.x,this.dragStartY=e.y-this.container.position.y,this.isDragging=!0,this.dragged=0},mouseMove:function(t){if(this.isDragging){var e=t.data.getLocalPosition(this.container.parent),n=this.container.position.x,i=this.container.position.y;this.container.position.x=e.x-this.dragStartX,this.container.position.y=e.y-this.dragStartY,this.dragged+=Math.abs(n-this.container.position.x),this.dragged+=Math.abs(i-this.container.position.y)}},mouseUp:function(){this.isDragging=!1},background:function(){return this.backgroundTexture.replace("__resource__",this.planet.resource_id)},backgroundName:function(){return"background_".concat(this.planet.resource_id)},backgroundSprite:function(){return new G.Sprite(this.loader.resources[this.backgroundName()].texture)},rendererWidth:function(){return this.$parent.width()},rendererHeight:function(){return this.$parent.height()},centerX:function(){return this.containerX()/2},centerY:function(){return this.containerY()/2},containerX:function(){return this.renderer.width-this.container.width},containerY:function(){return this.renderer.height-this.container.height},gridSprite:function(t){var e=this,n=new G.Sprite(this.gridTexture(t));return n.interactive=!0,n.hitArea=tt.hitArea,n.x=this.gridX(t),n.y=this.gridY(t),n.on("mouseover",function(){return e.gridOver(n)}),n.on("mouseout",function(){return e.gridOut(n)}),n.on("click",function(){return e.gridClick(t)}),n.on("tap",function(){return e.gridClick(t)}),this.gridLevel(t,n),this.gridRemaining(t,n),n},gridTexture:function(t){var e=tt.plain;return t.construction?e=tt.constructions[t.construction.building_id]:1===t.type?e=t.building_id?tt.buildings[t.building_id][this.planet.resource_id]:tt.resources[this.planet.resource_id]:t.building_id&&(e=tt.buildings[t.building_id]),new G.Texture(this.loader.resources.grid.texture,e)},gridX:function(t){return 162*(t.x-t.y+4)+(this.width-1608)/2},gridY:function(t){return 81*(t.x+t.y)+(this.height-888)/2},gridOver:function(t){t.alpha=.6},gridOut:function(t){t.alpha=1},gridClick:function(t){this.dragged>this.clickTreshold||r.$emit(t.building_id?"building-click":"grid-click",t)},gridLevel:function(t,e){if(t.level){var n=new G.Text(t.level,this.textStyle);n.position.x=(e.width-n.width)/2,n.position.y=e.height-50,e.addChild(n)}},gridRemaining:function(t,e){var n,i;if(t.construction?(n=t.construction.remaining,i=this.textStyle):t.training?(n=t.training.remaining,i=_.assignIn({},this.textStyle,{fill:"#ebb237"})):t.upgrade&&(n=t.upgrade.remaining,i=this.textStyle),n){var a=new G.Text(x(n),i);a.position.x=(e.width-a.width)/2,a.position.y=(e.height-a.height)/2,e.addChild(a);var r=setInterval(function(){a.text=x(--n),n||clearInterval(r)},1e3);this.intervals.push(r)}}}},nt=b.extend({props:["openAfterHidden"],methods:{openUser:function(t){this.openAfterHidden(function(){return r.$emit("profile-click",t)})},rank:function(t){return this.data.from+t}}}),it=s.extend({components:{Leaderboard:nt},mixins:[U],data:function(){return{selectedTab:"pve"}},created:function(){r.$on("trophy-click",this.open)},methods:{open:function(){var t=this;this.$nextTick(function(){return t.$modal.modal()})}}}),at=o.extend({props:["type","building"],data:function(){return{isEnabled:!1}},created:function(){var t=this;r.$on("modal-show",function(){return t.isEnabled=t.type===t.building.type}),r.$on("modal-hidden",function(){return t.isEnabled=!1})}}),rt=at.extend({props:["grid","url","storeUrl"],data:function(){return{isResearch:!1,mined:0,quantity:"",planet:{resource_id:void 0,resources:[]},selected:{id:void 0,efficiency:0},data:{resources:[]}}},created:function(){var t=this;r.$on("resource-updated",function(e){return t.mined=e}),r.$on("planet-update",function(){return t.fetchData()}),r.$on("planet-updated",function(e){return t.planet=e})},computed:{isTransmutable:function(){return this.quantity>0&&this.quantity<=this.transmutableQuantity},transmutableQuantity:function(){var t=_.find(this.planet.resources,{id:this.selected.id}),e=_.get(t,"storage",0);return this.planet.resource_id===this.selected.id?e+Math.floor(this.mined):e+_.get(t,"quantity",0)},transmutableEnergy:function(){return this.isTransmutable?this.quantity*this.selected.efficiency:0}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(e){t.data=e.data,_.find(t.data.resources,t.selected)?t.quantity="":t.select(_.first(t.data.resources))})},store:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id).replace("__resource__",this.selected.id),{quantity:this.quantity})},isSelected:function(t){return this.selected.id===t.id},select:function(t){this.selected=t,this.quantity=""}}}),ot=at.extend({props:["grid","url"],components:{Movement:C},data:function(){return{data:{incoming_movements:[],outgoing_movements:[]}}},created:function(){var t=this;r.$on("planet-update",function(){return t.fetchData()})},computed:{isEmpty:function(){return!this.data.incoming_movements.length&&!this.data.outgoing_movements.length}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(e){return t.data=e.data})}}}),st={props:["isEnabled","building","grid","close","planet","data","storeUrl"],mixins:[z],watch:{isEnabled:function(){this.quantity={}}},computed:{travelTime:function(){return Math.round(this.data.travel_time/this.slowestSupportUnitSpeed*(1-this.building.trade_time_bonus))}},methods:{support:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id),{quantity:this.quantity}).then(this.close)}}},ct={props:["isEnabled","building","grid","close","mined","planet","data","storeUrl","unitTypes"],mixins:[O],watch:{isEnabled:function(){this.quantity={}}},computed:{travelTime:function(){return Math.round(this.data.travel_time/this.transporterUnit.speed*(1-this.building.trade_time_bonus))}},methods:{transport:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id),{quantity:this.quantity}).then(this.close)},unitQuantity:function(t){return _.get(t,"storage",0)+_.get(t,"quantity",0)}}},ut=at.extend({props:["grid","close","url"],components:{Patrol:st,Trade:ct},mixins:[U],data:function(){return{selectedTab:"trade",mined:0,planet:{id:void 0,resource_id:void 0,resources:[],units:[]},data:{travel_time:0}}},created:function(){var t=this;r.$on("planet-updated",function(e){return t.planet=e}),r.$on("resource-updated",function(e){return t.mined=e})},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url).then(function(e){return t.data=e.data})}}}),dt=at.extend({props:["grid","url","storeUrl","destroyUrl"],data:function(){return{isResearch:!1,energy:0,supply:0,quantity:"",selected:{id:void 0,supply:0,train_cost:0,train_time:0},data:{remaining:0,units:[]}}},created:function(){var t=this;r.$on("energy-updated",function(e){return t.energy=e}),r.$on("planet-update",function(){return t.fetchData()}),r.$on("planet-updated",function(e){return t.supply=e.supply-e.used_supply-e.used_training_supply})},computed:{isTrainable:function(){return this.quantity>0&&this.quantity<=this.trainableQuantity},trainableQuantity:function(){return Math.floor(Math.min(this.energy/this.selected.train_cost,this.supply/this.selected.supply))},trainName:function(){return"".concat(this.data.quantity," x ").concat(this.selected.name)},trainTime:function(){return this.isTrainable?this.quantity*this.selected.train_time:0}},watch:{isEnabled:function(){this.fetchData()}},methods:{fetchData:function(){var t=this;this.isEnabled&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(e){t.data=e.data,t.initRemaining(t.data.remaining),_.find(t.data.units,t.selected)?t.quantity="":t.select(_.first(t.data.units))})},store:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id).replace("__unit__",this.selected.id),{quantity:this.quantity})},destroy:function(){axios.delete(this.destroyUrl.replace("__grid__",this.grid.id))},isSelected:function(t){return this.selected.id===t.id},select:function(t){this.selected=t,this.quantity=""}}}),ht=s.extend({props:["centralType","url","storeUrl","destroyUrl"],components:{Producer:rt,Scout:ot,Trader:ut,Trainer:dt},data:function(){return{isCapitalPlanet:!1,energy:0,grid:{id:void 0,building_id:void 0},data:{hasTraining:!1,remaining:0,building:{},upgrade:{}}}},created:function(){var t=this;r.$on("building-click",this.open),r.$on("energy-updated",function(e){return t.energy=e}),r.$on("planet-update",function(){return t.fetchData()}),r.$on("planet-updated",function(e){return t.isCapitalPlanet=e.is_capital})},computed:{canConstruct:function(){return this.energy>=this.data.upgrade.construction_cost},canDemolish:function(){return!(this.data.hasTraining||this.remaining||this.isCapitalPlanet&&this.data.building.type===this.centralType)},building:function(){return this.data.building}},methods:{open:function(t){this.grid=t,this.fetchData(!0)},openDemolish:function(){var t=this;this.openAfterHidden(function(){return r.$emit("demolish-open",t.grid)})},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url.replace("__grid__",this.grid.id)).then(function(n){t.data=n.data,t.initRemaining(t.data.remaining),e&&t.$nextTick(function(){return t.$modal.modal()})})},store:function(){axios.post(this.storeUrl.replace("__grid__",this.grid.id))},destroy:function(){axios.delete(this.destroyUrl.replace("__grid__",this.grid.id))}}}),lt=s.extend({props:["url","storeUrl"],data:function(){return{energy:0,data:{has_solarion:!0,upgrade_count:0,upgrade_cost:0}}},created:function(){var t=this;r.$on("upgrade-all-open",this.open),r.$on("energy-updated",function(e){return t.energy=e})},computed:{canStore:function(){return this.data.has_solarion&&this.data.upgrade_cost&&this.energy>=this.data.upgrade_cost}},methods:{open:function(){this.fetchData(!0)},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.isEnabled)&&axios.get(this.url).then(function(n){t.data=n.data,e&&t.$nextTick(function(){return t.$modal.modal()})})},store:function(){axios.post(this.storeUrl).then(this.close)}}});n("9Wh1"),Vue.filter("bracket",p),Vue.filter("fromNow",f),Vue.filter("item",m),Vue.filter("number",g),Vue.filter("percent",y),Vue.filter("sign",v),Vue.filter("timer",x),Vue.directive("popover",Q);new Vue({el:"#app",components:{Bookmark:c,Construction:u,Demolish:d,Mailbox:T,Message:D,Monitor:S,Mothership:N,Move:J,Navigation:B,Planet:j,Player:H,Profile:X,Setting:F,Sidebar:Z,Star:W,Starmap:K,Surface:et,Trophy:it,Upgrade:ht,UpgradeAll:lt}})},pyCd:function(t,e){}},[[0,1,2]]]);